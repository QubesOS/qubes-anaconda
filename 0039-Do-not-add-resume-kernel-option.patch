From ea91297b2a7599937ceeefeb21a3a185db9118f2 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Marek=20Marczykowski-G=C3=B3recki?=
 <marmarek@invisiblethingslab.com>
Date: Wed, 12 Jun 2019 04:46:18 +0200
Subject: [PATCH] Do not add resume= kernel option

Qubes don't support hibernation.
---
 pyanaconda/bootloader.py | 6 ------
 1 file changed, 6 deletions(-)

diff --git a/pyanaconda/bootloader.py b/pyanaconda/bootloader.py
index f4deb8460..bcac17de1 100644
--- a/pyanaconda/bootloader.py
+++ b/pyanaconda/bootloader.py
@@ -816,12 +816,6 @@ class BootLoader(object):
         swap_devices = storage.fsset.swap_devices
         dracut_devices.extend(swap_devices)
 
-        # Add resume= option to enable hibernation on x86.
-        # Choose the largest swap device for that.
-        if blivet.arch.is_x86() and swap_devices:
-            resume_device = max(swap_devices, key=lambda x: x.size)
-            self.boot_args.add("resume=%s" % resume_device.fstab_spec)
-
         # Does /usr have its own device? If so, we need to tell dracut
         usr_device = storage.mountpoints.get("/usr")
         if usr_device:
-- 
2.20.1

